<VirtualHost *:80>\n    ServerName example.com\n    Redirect permanent / https://example.com/\n</VirtualHost>\n\n<VirtualHost *:443>\n    ServerName example.com\n\n    DocumentRoot /var/www/html\n\n    SSLEngine on\n    SSLCertificateFile /path/to/certificate.crt\n    SSLCertificateKeyFile /path/to/private.key\n    SSLCertificateChainFile /path/to/chainfile.pem\n\n    # Shibboleth protection for /private\n    <Location /private>\n        AuthType shibboleth\n        ShibbolethSubjectPrefix ""\n        Require shibboleth\n    </Location>\n\n    # mod_rewrite rules\n    RewriteEngine On\n    RewriteRule ^/private/endpoint/postResponse$ /Shibboleth.sso/SAML2/POST [R=302,L]\n\n    # Security headers\n    Header always set X-Content-Type-Options "nosniff"\n    Header always set X-XSS-Protection "1; mode=block"\n    Header always set X-Frame-Options "DENY"\n    Header always set Content-Security-Policy "default-src 'self';"\n\n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n</VirtualHost>