<Attributes xmlns="urn:mace:shibboleth:2.0:attribute-map"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <!--
        Attribute mappings for Okta SAML assertions to Shibboleth attributes.
        Okta sends attributes as SAML 2.0 Attribute elements; the id values below
        become the environment variable names exposed to Apache/applications.
    -->

    <!-- ==================== Standard SAML 2.0 / OID attributes ==================== -->

    <!-- Primary user identifier (urn:oid:1.3.6.1.4.1.5923.1.1.1.7) -->
    <Attribute name="urn:oid:1.3.6.1.4.1.5923.1.1.1.7" id="eduPersonEntitlement"/>

    <!-- eduPersonPrincipalName â€“ scoped username, e.g. jsmith@sydney.edu.au -->
    <Attribute name="urn:oid:1.3.6.1.4.1.5923.1.1.1.6" id="eppn">
        <AttributeDecoder xsi:type="ScopedAttributeDecoder" scope="sydney.edu.au"/>
    </Attribute>

    <!-- eduPersonScopedAffiliation -->
    <Attribute name="urn:oid:1.3.6.1.4.1.5923.1.1.1.9" id="affiliation">
        <AttributeDecoder xsi:type="ScopedAttributeDecoder" scope="sydney.edu.au"
                          caseSensitive="false"/>
    </Attribute>

    <!-- eduPersonAffiliation (unscoped) -->
    <Attribute name="urn:oid:1.3.6.1.4.1.5923.1.1.1.1" id="unscoped-affiliation"
               caseSensitive="false"/>

    <!-- ==================== Core person attributes ==================== -->

    <!-- Email address (mail / urn:oid:0.9.2342.19200300.100.1.3) -->
    <Attribute name="urn:oid:0.9.2342.19200300.100.1.3" id="mail"/>
    <!-- Okta also frequently sends email as a plain-name attribute -->
    <Attribute name="email" id="mail" nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Display name (displayName / urn:oid:2.16.840.1.113730.3.1.241) -->
    <Attribute name="urn:oid:2.16.840.1.113730.3.1.241" id="displayName"/>
    <Attribute name="displayName" id="displayName"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Given name (givenName / urn:oid:2.5.4.42) -->
    <Attribute name="urn:oid:2.5.4.42" id="givenName"/>
    <Attribute name="firstName" id="givenName"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Surname (sn / urn:oid:2.5.4.4) -->
    <Attribute name="urn:oid:2.5.4.4" id="sn"/>
    <Attribute name="lastName" id="sn"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Common name (cn / urn:oid:2.5.4.3) -->
    <Attribute name="urn:oid:2.5.4.3" id="cn"/>

    <!-- uid (urn:oid:0.9.2342.19200300.100.1.1) -->
    <Attribute name="urn:oid:0.9.2342.19200300.100.1.1" id="uid"/>
    <Attribute name="login" id="uid"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Telephone (telephoneNumber / urn:oid:2.5.4.20) -->
    <Attribute name="urn:oid:2.5.4.20" id="telephoneNumber"/>

    <!-- Org unit (ou / urn:oid:2.5.4.11) -->
    <Attribute name="urn:oid:2.5.4.11" id="ou"/>

    <!-- Organisation (o / urn:oid:2.5.4.10) -->
    <Attribute name="urn:oid:2.5.4.10" id="o"/>

    <!-- ==================== Persistent / transient identifiers ==================== -->

    <!-- SAML 2.0 persistent NameID carried as an attribute -->
    <Attribute name="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"
               id="persistent-id">
        <AttributeDecoder xsi:type="NameIDAttributeDecoder" formatter="$NameQualifier!$SPNameQualifier!$Name"/>
    </Attribute>

    <!-- SAML 2.0 transient NameID -->
    <Attribute name="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" id="targeted-id">
        <AttributeDecoder xsi:type="NameIDAttributeDecoder" formatter="$NameQualifier!$SPNameQualifier!$Name"/>
    </Attribute>

    <!-- ==================== Okta-specific custom attributes ==================== -->

    <!-- Okta groups membership -->
    <Attribute name="groups" id="groups"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Okta user role -->
    <Attribute name="role" id="role"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

    <!-- Okta department -->
    <Attribute name="department" id="department"
               nameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"/>

</Attributes>
